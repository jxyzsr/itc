<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>回答问题</title>
  <link rel="stylesheet" href="/static/css/csslogup.css">
  <script src="/static/js/jquery.min.js"></script>
</head>
<body>
<div class="rg_layout" style="margin-top: 6%">
  <div class="rg_left">
    <p>回答问题</p>
    <p>CREATE A ANSWER</p>
  </div>
  <div class="rg_center">
    <div class="rg_form">
      <form action="/writeanswer" method="post">
        <br><br><br><br><br><br><br>
        <table>
          <!--label 标签的作用是当点击文字也会跳到文本输出框-->
          <!--for属性与ID属性对应规定 label 绑定到哪个表单元素。-->
          <tr>
            <td class="td_left"><label for="username">用户名</label> </td>
            <td class="td_right"><input type="text" name="username" value="" id="username"> </td>
          </tr>
          <tr>
            <td class="td_left"><label for="role">用户身份</label> </td>
            <td class="td_right"><input type="text" value="" id="role" class="password"> </td>
          </tr>
          <tr>
            <td class="td_left"><label for="question">选择问题</label> </td>
            <td class="td_right">
              <select id="question" name="question_id" class="password">
              </select>
            </td>
          </tr>
          <tr>
            <td class="td_left"><label for="answer_content">回答</label> </td>
            <td class="td_right"><textarea id="answer_content" name="answer_content" class="content"
            style="resize:none;width: 400px;height: 140px;border: 1px solid #A6A6A6;border-radius: 5px;padding-left: 10px;"
            cols="20" maxlength="400"></textarea></td>
          </tr>
          <tr>
            <td colspan="2" align="center">
              <button id="btn_sub">确认提交</button>
            </td>
          </tr>
        </table>
      </form>
      <div class="error"></div>
    </div>
  </div>
</div>
<script>
  var url = "/transmitinfo"
  $.ajax({
    url:url,
    type:"post",
    dataType:"json",
    success:function (data){
      var user = data
      $("#username").attr("disabled","disabled")
      $("#role").attr("disabled","disabled")
      $("#username").attr('value',user.username,"disabled","disabled")
      $("#role").attr('value',user.role,"disabled","disabled")
    },
    error:function (xhr,status){
      console.log("错误了")
      console.log(status)
    }
  })
  $.ajax({
    url:"/indexquestion",
    type:"post",
    dataType:"json",
    success:function (data){
      var question = data
      var rquestion_content = ''
      question.forEach((item,index) => {
        str = "<option " + "value =" + item.id + ">" + item.content + "</option>"
        rquestion_content = rquestion_content + str
      })
      $("#question").html(rquestion_content)
    },
    error:function (xhr,status){
      console.log("错误了")
      console.log(status)
    }
  })
</script>
</body>
</html>